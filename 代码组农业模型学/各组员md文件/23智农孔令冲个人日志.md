# 个人日志

## 个人日志:DSSAT 环境与依赖安装

### 一、基本信息

- 日期:2025 年 06 月 23 日
- 天气：雨
- 地点：博雅楼 1709

  ### 二、今日计划

  -作为代码组组长，帮助同学顺利安装软件和配置环境，确保每一个成员都能完成相应的工作。
  -寻找国内下载速度最快的国内镜像源 
  -运行 `setup_windows4.sh` 脚本，完成 DSSAT 环境配置和依赖安装。
- 测试 Python 环境和必要的 Python 包是否安装成功。
-安装Ubuntu，配制WSL环境，提前编译dssat，为本组同学运行代码奠定基础。

### 三、今日完成

- 运行 `setup_windows4.sh` 脚本，在脚本运行过程中：
    - 检测到系统缺少 CMake,脚本自动安装了 CMake。对于 Linux 系统，使用 `apt-get` 进行安装；若为 macOS 且已安装 Homebrew，则使用 `brew` 安装。
    - 检测到 Fortran 编译器 `gfortran` 未安装，根据不同的操作系统，使用相应的包管理器进行了安装。
    - 成功创建了 Python 虚拟环境 `venv`，并在其中升级了 `pip`。
    - 尝试使用中国镜像源（如清华、阿里云等）安装 `requirements.txt` 中的 Python 依赖包。若安装失败，则逐个安装必要的包，如 `numpy`、`pandas`、`matplotlib`、`scipy`、`numba`。
    -成功完成dssat的编译，继续运行compare_fortran.py文件确保能够成功运行
- 测试 Python 环境，验证了 `numpy`、`pandas`、`matplotlib`、`numba` 等包可以正常导入。

  ### 四、今日收获
- 掌握了使用 `setup_windows4.sh` 脚本进行 DSSAT 环境配置和依赖安装的流程，了解了不同操作系统下包管理器的使用方法。
-成功掌握dssat得到编译与运用。
- 熟悉了在虚拟环境中管理 Python 包的方法，以及如何使用国内镜像源加速包的安装。
-掌握部分bug修复的方法

### 五、今日反思

- 运行程序时，出现报错，需要仔细审视代码及报错内容，才能有效纠正错误
- 在安装依赖包时，部分镜像源可能会出现连接问题，需要尝试多个镜像源。
- 对于一些依赖包的安装，可能会受到系统环境和版本的影响，需要根据具体情况进行调整。
六、其他记录
- 环境配置完成记录：所有环境变量已正确设置，依赖包已成功安装。
- Python 环境测试成功：必要的 Python 包(pip)已成功导入。

## 个人日志:DSSAT 模型构建与数据安装

### 一、基本信息

- 日期:2025 年 06 月 24 日
- 天气：多云
- 地点：博雅楼 1709

  ### 二、今日计划
- 运行所有.py文件及其各种模型所带的程序，修复所有debug
- 构建 DSSAT 模型。
- 安装 DSSAT 所需的样本数据，包括草莓实验数据和气象数据。

  ### 三、今日完成

  -作为班级前端，运行所有相关代码，修复部分debug，为科研组、发布组作材料准备，以便于后续工作进行。
- 构建 DSSAT 模型：
    - 导航到 DSSAT 源代码目录 `dssat-csm-os-develop`，清理之前的构建文件。
    - 使用 CMake 进行配置，设置了 Fortran 编译器和相关的编译标志，以确保最大兼容性。
    - 进行编译和安装操作，在编译过程中，脚本会记录详细的日志，以便在出现问题时进行排查。
- 安装 DSSAT 样本数据：
    - 将 `dssat-csm-data-develop/Strawberry` 目录下的草莓实验数据复制到 `$HOME/dssat/Strawberry` 目录。
    - 将 `dssat-csm-data-develop/Weather` 目录下的气象数据复制到 `$HOME/dssat/Strawberry` 目录。
    - 创建了 DSSAT 配置文件 `$HOME/dssat/DSSATPRO.L48` 和草莓模拟的批处理文件 `$HOME/dssat/BatchFiles/STRB.V48`。

      ### 四、今日收获
- 了解了 DSSAT 模型的构建过程，包括使用 CMake 进行配置和编译的步骤。
- 学会了如何安装 DSSAT 所需的样本数据，以及如何创建配置文件和批处理文件。

  ### 五、今日反思
- 在构建 DSSAT 模型时，可能会遇到编译错误，需要仔细查看日志文件，根据错误信息进行相应的处理，如安装缺失的依赖项或调整编译标志。
- 在复制数据时，需要确保源文件存在，否则会出现警告信息。

  ### 六、其他记录
- DSSAT 模型构建成功：编译和安装过程顺利完成。
- 样本数据安装完成：草莓实验数据和气象数据已成功复制到指定目录。

## 个人日志:DSSAT 与 Python 输出比较

### 一、基本信息

- 日期:2025 年 06 月 25 日
- 天气：雨
- 地点：博雅楼 1709

  ### 二、今日计划
- 运行 DSSAT 模型和 Python 实现，生成输出数据。
- 使用 `compare_outputs.py` 脚本比较 DSSAT 和 Python 输出的关键指标，如产量和物候期。

  ### 三、今日完成
- 运行 DSSAT 模型和 Python 实现，分别生成了 `summary.csv` 或 `PlantGro.OUT` 格式的 Fortran 输出文件和 CSV 格式的 Python 输出文件。
- 使用 `compare_outputs.py` 脚本进行比较：
    - 脚本读取 Fortran 输出文件和 Python 输出文件，将其转换为 `pandas.DataFrame` 对象。
    - 提取产量信息，比较 Python 和 Fortran 输出的产量差异。
    - 提取物候期信息，比较不同物候期在 Python 和 Fortran 输出中的出现时间差异。
    - 生成可读的报告，总结了产量和物候期的差异。

      ### 四、今日收获
- 掌握了如何运行 DSSAT 模型和 Python 实现，并生成相应的输出数据。
- 学会了使用 `compare_outputs.py` 脚本比较不同实现的输出指标，了解了如何提取关键信息并进行差异分析。

  ### 五、今日反思
- 在运行 DSSAT 模型时，需要确保配置文件和批处理文件正确设置，否则可能会导致输出结果异常。
- 在比较输出指标时，需要注意数据格式和列名的一致性，以确保准确提取信息。

  ### 六、其他记录
- 输出数据生成成功:DSSAT 和 Python 实现均生成了有效的输出文件。
- 比较报告生成：总结了产量和物候期的差异，为后续分析提供了依据。

## 个人日志:DSSAT 模拟结果可视化

### 一、基本信息

- 日期:2025 年 06 月 26 日
- 天气：阴
- 地点：博雅楼 1709

  ### 二、今日计划
- 找出dssat和python运行结果值、天数不一样的原因
- 运行 `run_full_comparison.py` 脚本，进行全面的比较工作流。
- 使用 `plot_results.py` 脚本绘制验证结果的可视化图表。
 
 ### 三、今日完成

  -成功找出python与dssat部分输出值不同的原因：
  1、python和dssat所读取的数据文件不同
  2、代码运用方式不一样
  3.dssat中的部分函数包含了一定的内置函数。
- 运行 `run_full_comparison.py` 脚本：
    - 确保 Fortran 模型已构建完成。
    - 遍历 `dssat-csm-data-develop/Strawberry` 目录下的所有实验文件（`.SRX` 格式），对每个实验文件进行验证，并将结果保存到 `comparison_reports` 目录。
- 使用 `plot_results.py` 脚本：
    - 解析 `comparison_reports` 目录下的所有报告文件，将结果组装成 `pandas.DataFrame` 对象。
    - 根据数据生成可视化图表，可选择将图表保存到指定路径或交互式显示。

      ### 四、今日收获
- 了解了如何进行全面的 DSSAT 比较工作流，包括模型构建、实验验证和结果保存。
- 学会了使用 `plot_results.py` 脚本将验证结果可视化，提高了对模拟结果的理解和分析能力。

  ### 五、今日反思
- 在运行 `run_full_comparison.py` 脚本时，可能会因为实验文件缺失或模型构建失败而导致部分验证任务无法完成，需要检查相关文件和环境。
- 在绘制可视化图表时，需要根据数据特点选择合适的图表类型和样式，以确保图表能够清晰地展示信息。

  ### 六、其他记录
- 全面比较工作流完成：所有实验文件已完成验证，结果保存到指定目录。
- （协助其他组）可视化图表生成：根据验证结果生成了清晰的可视化图表。 