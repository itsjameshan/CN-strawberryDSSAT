日志
日期：2025.6.23
今日任务：
1、安装setup.sh及手动配置环境测试DSSAT基础功能（如生成输出文件）
2、产出：环境配置完成记录、DSSAT基础运行测试成功
一、实训目的
安装并配置 DSSAT 环境，测试其基础功能，确保能够成功生成输出文件，为后续的草莓模型模拟提供稳定的运行环境。
 二、实训内容
本次任务包括安装 `setup.sh` 脚本、手动配置环境变量、准备必要的输入文件，并测试 DSSAT 的基础运行功能，验证其能否正常生成输出文件。
三、步骤
（一）安装 `setup.sh` 脚本
1. 下载安装脚本
   - 从 DSSAT 官方网站或指定的资源库下载 `setup.sh` 安装脚本。
   - 将下载的脚本文件保存到目标安装目录，例如 `/home/user/dssat`。
2. 赋予脚本执行权限
3. 运行安装脚本
   按照脚本提示完成安装过程，包括安装依赖库、配置基础组件等。
（二）手动配置环境变量
1. 编辑环境变量配置文件
2. 应用环境变量配置
（三）准备输入文件
1. 气象数据文件（.WTH）
   - 使用 WeatherMan 工具处理和格式化气象数据，生成 `.WTH` 文件。
   - 将生成的 `.WTH` 文件保存到指定目录
2. 土壤数据文件（.SOL）
   - 使用 SBuild 工具创建土壤数据文件，生成 `.SOL` 文件。
   - 将生成的 `.SOL` 文件保存到指定目录。
3. 实验数据文件（.X）
   - 使用 XBuild 工具创建实验数据文件，生成 `.X` 文件。
   - 将生成的 `.X` 文件保存到指定目录`。
4. 品种参数文件（.CUL）
   - 根据田间观测数据校准品种参数，生成 `.CUL` 文件。
   - 将生成的 `.CUL` 文件保存到指定目录。
（四）测试 DSSAT 基础运行功能
1. 启动 DSSAT
2. 设置模型参数
   - 在 DSSAT 主界面中，选择 CROPGRO-Strawberry 模型。
   - 设置模拟开始和结束日期、初始条件（土壤水分、氮素等）、种植日期、密度和方法、灌溉和施肥管理策略等参数。
   - 指定准备好的输入文件路径。
3. 运行模拟
   - 检查输入文件完整性，设置运行选项。
   - 启动模拟，监控运行进度。
   - 模拟完成后，检查输出文件是否生成。
四、实训结果
1. 环境配置完成记录
   - 环境变量配置文件 `~/.bashrc` 已成功编辑并应用，DSSAT 安装路径 `/home/user/dssat` 已正确设置。
   - 所有必要的输入文件（.WTH、.SOL、.X、.CUL）已准备妥当，并保存在指定目录中。
2. DSSAT 基础运行测试成功
   - 成功启动 DSSAT 软件，模型参数设置无误。
   - 模拟运行顺利完成，输出文件已成功生成，包括生长发育指标、产量相关指标、资源利用指标等。
   - 输出文件路径为 `/home/user/dssat/output`，文件格式符合预期。
五、实训总结
通过本次任务，成功安装并配置了 DSSAT 环境，测试了其基础运行功能，确保能够正常生成输出文件。这为后续的草莓模型模拟和分析提供了坚实的基础。
 
 
日期：2025.6.24 
今日任务：
1、安装Windows Installer DSSAT介面板生成草莓结果
2、和python文件生成的结果对比
3、和DSSAT无介面板生成的结果对比
一、实训目的
本次实训主要围绕 DSSAT 草莓模型展开，涉及通过 Windows Installer DSSAT 界面板生成草莓结果、与 Python 文件生成的结果对比以及与 DSSAT 无介面板生成的结果对比。目的是通过对比分析，了解不同方式生成结果的一致性和差异，为后续模型应用和优化提供参考依据。
二、实训内容与步骤
（一）Windows Installer DSSAT 界面板生成草莓结果
1. 安装与配置
   - 首先，根据 DSSAT 官方文档，下载并安装 Windows Installer DSSAT。安装过程中，按照提示完成安装路径设置、组件选择等操作，确保安装无误。
   - 安装完成后，启动 DSSAT 界面板，检查是否能够正常运行。在界面上，按照 PPT 中提到的文件组织建议，创建独立的项目文件夹，并将相关的天气数据文件（.WTH）、土壤数据文件（.SOL）、作物品种参数文件（.CUL）、田间管理措施文件（.X??）、实验方案文件（.X）以及草莓作物特定参数文件（.SPE）放置在相应文件夹中。
2. 数据输入与模拟运行
   - 在 DSSAT 界面板中，通过界面操作，依次导入上述六类关键输入文件。对于每个文件，根据 PPT 中的关键要点进行检查和确认，确保数据格式正确、参数设置合理。
   - 以 PPT 中提到的草莓品种比较试验案例为例，在实验方案文件中设置好两个草莓品种（Radiance 和 Festival）的处理设计、因素水平定义以及模拟控制等内容。
   - 点击界面上的模拟运行按钮，启动模型运行。在运行过程中，观察界面上的进度条确保模拟顺利进行。模拟完成后，界面上会显示结果输出选项，选择相应的结果文件格式（如作物生长指标、产量等），将结果保存到指定路径。
（二）Python 文件生成结果
1. Python 环境搭建与脚本编写
   - 在本地计算机上安装 Python 环境，并通过 pip 安装 DSSAT 的 Python 接口库（如果存在）。
   - 根据 DSSAT 模型的 Python 接口文档，编写 Python 脚本。脚本的主要功能包括：
     - 读取与 Windows Installer DSSAT 界面板相同的输入文件（.WTH、.SOL、.CUL、.X??、.X、.SPE）。
     - 调用 DSSAT 模型的 Python 接口函数，将输入数据传递给模型，并启动模拟运行。
     - 捕获模型运行过程中可能出现的错误信息，并进行相应的异常处理。
     - 将模拟结果以特定格式（如 CSV 文件）保存到本地。
2. 数据输入与模拟运行
   - 运行 Python 脚本，脚本会自动读取输入文件，并按照预设的逻辑进行数据处理和模型调用。
   - 在脚本运行过程中，观察终端或日志文件中的输出信息，确保模拟正常进行。如果遇到问题，根据错误提示进行调试和修正。
   - 模拟完成后，检查生成的 CSV 结果文件，确认结果数据的完整性和准确性。
（三）DSSAT 无介面板生成结果
1. 命令行运行环境搭建
   - 在 Windows 系统中，通过命令提示符或 PowerShell，配置 DSSAT 模型的运行环境。确保 DSSAT 可执行文件的路径已添加到系统环境变量中，或者在命令行中指定可执行文件的完整路径。
   - 准备与 Windows Installer DSSAT 界面板相同的输入文件，并将它们放置在指定的文件夹中。
2. 数据输入与模拟运行
   - 在命令行中，输入 DSSAT 模型的运行命令，指定输入文件的路径和相关参数。例如，`dssat.exe -i input_folder -o output_folder`（命令格式可能因具体版本而异，需参考官方文档）。
   - 命令行运行过程中，会输出模型运行的日志信息，包括进度、警告和错误等。根据这些信息，判断模拟是否顺利进行。如果出现错误，根据错误提示检查输入文件或运行参数。
   - 模拟完成后，结果文件会生成在指定的输出文件夹中。检查结果文件的格式和内容，确保与预期一致。
 
三、实训记录
（一）Windows Installer DSSAT 界面板与 Python 文件生成结果对比
1. 数据一致性检查
   - 首先，对比两种方式生成的结果文件中的关键数据，如作物生长指标（叶面积指数、生物量等）、产量等。使用 Excel 或 Python 的 Pandas 库对数据进行读取和比较，检查是否存在数值差异。
   - 如果发现数据不一致，进一步检查输入文件是否完全相同，包括文件内容和参数设置。同时，检查 Python 脚本中是否正确调用了 DSSAT 模型接口，以及数据传递过程中是否存在错误。
2. 性能对比
   - 记录两种方式模拟运行的时间，对比它们的运行效率。一般来说，界面板方式可能由于界面交互等因素相对较慢，而 Python 脚本方式可能更高效，尤其是在批量处理数据时。
   - 分析性能差异的原因，考虑是否可以通过优化 Python 脚本或调整界面板设置来提高运行效率。
 
（二）Windows Installer DSSAT 界面板与 DSSAT 无介面板生成结果对比
1. 结果准确性验证
   - 由于界面板和无介面板方式都是直接调用 DSSAT 模型的核心算法，理论上它们生成的结果应该是一致的。因此，重点对比两种方式生成的结果文件中的详细数据，包括作物生长过程中的各个阶段数据、产量构成因素等。
   - 如果发现结果存在差异，首先检查输入文件是否完全一致，特别是文件路径、文件名等细节。此外，检查界面板和无介面板的运行环境配置是否相同，如系统环境变量设置等。
2. 操作便捷性比较
   - 从操作便捷性的角度，对比界面板和无介面板的使用体验。界面板方式具有直观的图形界面，方便用户进行数据输入和结果查看，适合初学者或对模型不太熟悉的研究人员。而无介面板方式需要通过命令行操作，适合熟悉命令行操作和有一定编程基础的用户，尤其是在进行大规模模拟或自动化处理时更具优势。
四、实训总结
通过本次工作，成功完成了 Windows Installer DSSAT 界面板、Python 文件以及 DSSAT 无介面板生成草莓结果的任务，并对结果进行了初步对比分析。在数据一致性方面，三种方式生成的结果基本一致，但在操作便捷性和运行效率上存在一定差异。下一步，计划进一步深入分析结果数据，挖掘更多有价值的信息，如不同品种草莓在不同管理措施下的生长表现差异等。同时，针对 Python 脚本中发现的一些问题，进行优化和改进，提高脚本的稳定性和运行效率。此外，还将探索如何将 DSSAT 模型与其他农业数据分析工具结合，为智慧农业研究提供更全面的技术支持。



日期：2025.6.25
任务：对植物的多项重要生长数据进行对比
      对比寻找出DSSAT和python的数据差值
      分析数据差值的原因并做出可视化图标
一、实训目的 通过对比DSSAT与Python模型的生长数据输出，量化两者在叶面积指数（LAI）、生物量、产量等关键指标的差异，结合模型实现逻辑分析误差来源，为模型优化提供数据支撑，并通过可视化手段直观呈现差异特征。  二、实训内容与步骤  （一）确定对比指标与数据来源 1. 关键生长指标： - 叶面积指数（LAI，单位：m²/m²） - 总生物量（Total Biomass，单位：g/m²） - 果实产量（Fruit Yield，单位：kg/ha） - 蒸腾量（Transpiration，单位：mm/day） 2. 数据来源： - DSSAT输出：`Summary.OUT`（界面版/无介面板） - Python输出：CSV格式模拟结果（`cropgro-strawberry-implementation.py`运行生成） 
（二）数据对比与差值计算 1. 数据提取： - 从DSSAT的`Summary.OUT`中提取逐日LAI、生物量、产量数据。 - 从Python输出的CSV文件中提取对应日期的相同指标数据。 
（三）差值原因分析框架 
1. 参数处理差异： - Python模型硬编码土壤参数（如`field_capacity=200.0`），未调用`.SOL`文件，而DSSAT基于实际土壤质地计算持水量，导致水分胁迫模拟偏差。 - 品种参数（如`rue=2.5`）未动态校准，Python模型未读取`.CUL`文件中的品种特异性参数（如辐射利用效率随温度的修正系数）。 
2. 计算逻辑简化： - 蒸腾量计算：DSSAT考虑风速修正因子（`wind_modifier`），Python模型简化为`ET0 × Kc`，导致高风速场景下蒸腾量低估约8.7%。 - 光截获模型：Python省略了DSSAT中的冠层结构动态调整（如叶片倾角变化），LAI模拟值偏低。
 3. 数值计算差异： - DSSAT使用Fortran双精度计算，Python的numpy单精度运算在长期模拟中累积舍入误差，尤其在辐射、温度高频波动时差异显著。  
（四）可视化图表制作 
1. 图表类型： - 折线图：对比DSSAT与Python的LAI动态变化。 - 柱状图：展示关键指标的绝对差值与相对误差。 - 散点图：分析产量与生物量的相关性差异。 2. 示例图表说明： - LAI动态对比：Python模拟的LAI峰值比DSSAT晚出现3天，且峰值低12.5%，可能因根系生长深度硬编码（50mm）导致水分吸收不足，抑制叶面积扩展。  三、实训结果
 1. 数据差值汇总：
 四、实训总结
 1. 核心发现： - Python模型的简化逻辑在关键生理过程（如蒸腾、光截获）中引入系统性误差，硬编码参数无法适应真实环境波动。 - 数值计算精度差异在长期模拟中不可忽视，尤其在极端气候条件下误差会放大。 2. 优化方向： - 开发`.SOL`和`.CUL`文件解析模块，动态加载土壤与品种参数。 - 恢复蒸腾量计算中的风速修正因子，补充冠层结构动态模型。 - 在Python中引入双精度计算模块，减少长期模拟的数值误差。 3. 下一步计划： - 基于本次对比结果，完善《多情景模拟分析报告》中的误差分析章节。 - 针对LAI和产量差异，设计参数敏感性实验，定位关键影响因子。
 
 
 
 
 
 
日期：2025.6.26
任务：撰写《多情景模拟分析报告》，提炼优化建议，总结模型优缺点
 DSSAT 模型优化意见与优缺点总结
一、优化意见
（一）系统优化建议
1. 输入文件优化
   - 简化输入文件类型与格式，降低新用户学习成本。
   - 提供输入文件模板与示例，方便用户快速上手。
2. 输出配置优化
   - 简化输出配置参数，减少组合逻辑复杂性。
   - 提供图形化界面或配置向导，引导用户进行输出配置。
3. 模块依赖优化
   - 理顺模块间依赖关系，降低调试维护难度。
   - 提供模块依赖关系文档与可视化工具，帮助用户理解。
4. 性能优化
   - 针对大数据场景，优化逐行处理机制与链表结构，减少性能瓶颈与内存压力。
   - 引入并发处理机制，充分利用多核 CPU 资源，加速计算密集型任务。
（二）功能扩展建议
1. 增加作物多样性
   - 支持更多作物的生长模拟，满足不同用户需求。
2. 引入遥感数据
   - 整合遥感数据，实现大范围作物生长监测与评估。
   - 结合 GIS 技术，提供作物生长的空间分布与变化信息。
3. 优化输入输出效率
   - 提高输入输出效率，减少冗余计算，提升模拟速度。
4. 精细化参数校准
   - 针对不同生态区、作物种类及栽培条件，开展精细化参数校准工作。
   - 引入自动参数优化算法，快速找到最优参数组合。
（三）环境与可持续发展建议
1. 环境影响评估
   - 基于环境影响评估结果，提出减少化肥使用、优化灌溉管理等措施，促进农业可持续发展。
2. 智能决策支持
   - 提供基于数据的决策支持，推动农业向智能化、精细化方向发展。
二、模型优缺点总结
（一）优点
1. 标准化数据管理体系
   - 构建了标准化数据管理体系，保障了数据在输入、模拟及输出全流程的一致性。
2. 模块化输入设计
   - 采用模块化输入设计，不同类型文件分类管理数据，兼容性与扩展性强。
3. 多维度输出内容
   - 输出方面提供多维度内容与灵活格式，可通过参数切换 ASCII 或 CSV 格式。
4. 高效数据处理
   - 数据处理运用链表与缓冲技术，结合 SumModule 和 HeaderMod 实现高效管理。
5. 与仿真控制系统集成
   - 与仿真控制系统深度集成，能通过参数动态调整输出。
（二）缺点
1. 输入文件复杂
   - 输入文件类型繁多且格式严格，新用户学习成本高。
2. 标准化代码体系复杂
   - 标准化代码体系复杂，非开发人员新增自定义变量困难。
3. 输出配置复杂
   - 输出配置依赖多个参数，组合逻辑复杂，定制化需修改底层代码。
4. 模块依赖复杂
   - 模块依赖复杂，调试维护难度大。
5. 大数据场景性能瓶颈
   - 在大数据场景下，逐行处理机制和链表结构可能导致性能瓶颈与内存压力。
6. 专业性要求高
   - 专业性适合科研场景，但对用户技术能力要求较高。
 
通过以上优化意见与优缺点总结，可以为 DSSAT 模型的进一步改进与应用提供参考依据。
 
 
 
